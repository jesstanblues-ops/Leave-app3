{% extends 'base.html' %}
{% block content %}
<h3>Admin Dashboard</h3>
<h4 class="mt-3">Leave Requests</h4>
<table class="table table-sm table-bordered">
<thead><tr><th>Employee</th><th>Type</th><th>Dates</th><th>Days</th><th>Status</th><th>Action</th></tr></thead>
<tbody>
{% for l in leaves %}
<tr>
  <td>{{ l.employee_name }}</td>
  <td>{{ l.leave_type }}</td>
  <td>{{ l.start_date }} â†’ {{ l.end_date }}</td>
  <td>{{ l.days }}</td>
  <td>{{ l.status }}</td>
  <td>{% if l.status=='Pending' %}<a class="btn btn-success btn-sm" href="/approve/{{ l.id }}">Approve</a> <a class="btn btn-danger btn-sm" href="/reject/{{ l.id }}">Reject</a>{% else %}-{% endif %}</td>
</tr>
{% endfor %}
</tbody>
</table>

<h4 class="mt-4">Employees</h4>
<table class="table table-sm table-bordered">
<thead><tr><th>Name</th><th>Entitlement</th><th>Balance</th><th>Update Entitlement</th><th>Update Balance</th></tr></thead>
<tbody>
{% for e in employees %}
<tr>
  <td>{{ e.name }}</td>
  <td>{{ e.entitlement }}</td>
  <td>{{ e.current_balance }}</td>
  <td>
    <form method="post" action="/update_entitlement" class="d-flex">
      <input type="hidden" name="name" value="{{ e.name }}">
      <input name="entitlement" class="form-control form-control-sm me-2" placeholder="{{ e.entitlement }}" type="number" step="0.25">
      <button class="btn btn-primary btn-sm">Save</button>
    </form>
  </td>
  <td>
    <form method="post" action="/update_balance" class="d-flex">
      <input type="hidden" name="name" value="{{ e.name }}">
      <input name="balance" class="form-control form-control-sm me-2" placeholder="{{ e.current_balance }}" type="number" step="0.25">
      <button class="btn btn-warning btn-sm">Save</button>
    </form>
  </td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
