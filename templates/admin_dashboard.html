{% extends 'base.html' %}
{% block content %}

<h2>Admin Dashboard</h2>

<h3 class="mt-4">Leave Requests</h3>
<table class="table table-bordered">
    <tr>
        <th>Name</th>
        <th>Dates</th>
        <th>Days</th>
        <th>Status</th>
        <th>Action</th>
    </tr>
    {% for l in leaves %}
    <tr>
        <td>{{ l.employee_name }}</td>
        <td>{{ l.start_date }} â†’ {{ l.end_date }}</td>
        <td>{{ l.days }}</td>
        <td>{{ l.status }}</td>
        <td>
            {% if l.status == 'Pending' %}
            <a href="/approve/{{ l.id }}" class="btn btn-success btn-sm">Approve</a>
            <a href="/reject/{{ l.id }}" class="btn btn-danger btn-sm">Reject</a>
            {% else %}
            <span class="text-muted">No action</span>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

<h3 class="mt-5">Employees</h3>
<table class="table table-bordered">
    <tr>
        <th>Name</th>
        <th>Entitlement</th>
        <th>Balance</th>
        <th>Update Entitlement</th>
    </tr>

    {% for e in employees %}
    <tr>
        <td>{{ e.name }}</td>
        <td>{{ e.entitlement }}</td>
        <td>{{ e.current_balance }}</td>
        <td>
            <form method="POST" action="/update_entitlement" class="d-flex">
                <input type="hidden" name="name" value="{{ e.name }}">
                <input type="number" name="entitlement"
                       class="form-control form-control-sm me-2"
                       placeholder="New value">
                <button class="btn btn-primary btn-sm">Update</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
